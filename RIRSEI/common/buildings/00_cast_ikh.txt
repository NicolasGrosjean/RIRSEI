castle = {

#Palais
ca_ville_palatiale = {
desc = ville_palatiale_desc

potential = {
is_capital = yes
FROM = {
independent = yes
religion_group = muslim
is_nomadic = no
is_tribal = no
}
FROM = {
OR = {
tier = duke
tier = king
tier = EMPEROR } }

FROM = {
primary_title = {
OR = {
has_law = assab_2
has_law = assab_1
has_law = assab_0
}
		}
}

}

		
		trigger = { 
TECH_CASTLE_CONSTRUCTION = 0
 }
                add_number_to_name = no 
		gold_cost = 300
		build_time = 730

heavy_infantry = 200
archers = 300
fort_level = 2.0
tax_income = -5
retinuesize = 1000
levy_size = -3

liege_prestige = 2

		 ai_creation_factor = 101


    }

#Ruralité
ca_muz_rural = {
desc = muz_rural_desc

potential = {
OR = {
FROM = { independent = no }
AND = {
NOT = { is_capital = yes }
FROM = { independent = yes }
}
}

FROM = {
religion_group = muslim
is_nomadic = no
is_tribal = no
}


}


        trigger = {
TECH_CASTLE_CONSTRUCTION = 0
 }
                add_number_to_name = no
        gold_cost = 10
        build_time = 100


fort_level = -3
tax_income = 4





        ai_creation_factor = 101


    }

#Ribats

ca_muz_ribat = {
desc = muz_ribat_desc

potential = {
OR = {
FROM = { independent = no }
AND = {
NOT = { is_capital = yes }
FROM = { independent = yes }
}
}

FROM = {
religion_group = muslim
is_nomadic = no
is_tribal = no
}
owner= { top_liege = { ROOT = { any_neighbor_province = { owner = { top_liege = { NOT = { religion = PREVPREVPREVPREV } } } } } } }

}


        trigger = {
TECH_CASTLE_CONSTRUCTION = 0
 }
                add_number_to_name = no
        gold_cost = 200
        build_time = 400


fort_level = 3
tax_income = -4
heavy_infantry = 40
heavy_infantry_morale = 0.10
archers = 60
archers_morale = 0.10
light_infantry = 100
light_cavalry = 30
light_cavalry_morale = 0.10





        ai_creation_factor = 101


    }

#Iqtâ(un)
ca_iqta_un = {
desc = iqta_un_desc

potential = {
OR = {
FROM = { independent = no }
AND = {
NOT = { is_capital = yes }
FROM = { independent = yes }
}
}

FROM = {
religion_group = muslim
is_nomadic = no
is_tribal = no
OR = {
tier = count
tier = duke
tier = king
}
}

OR = {
FROM = {
primary_title = {
OR = {
has_law = assab_1
has_law = assab_0
}
        }
}
top_liege = {
primary_title = {
OR = {
has_law = assab_1
has_law = assab_0
}
        }
}
}
}


        trigger = {
TECH_CASTLE_CONSTRUCTION = 0
 }
                add_number_to_name = no
        gold_cost = 10
        build_time = 100



tax_income = -2
retinuesize = 250




        ai_creation_factor = 101
extra_tech_building_start = 100        

    }



#iqtâ(deux)

ca_iqta_deux = {
desc = iqta_deux_desc

potential = {

FROM = { independent = no }


FROM = {
religion_group = muslim
is_nomadic = no
is_tribal = no
OR = {
tier = duke
tier = king
}
}

OR = {
FROM = {
primary_title = {
OR = {
has_law = assab_1
has_law = assab_0
}
        }
}
top_liege = {
primary_title = {
OR = {
has_law = assab_1
has_law = assab_0
}
        }
}
}
}


        trigger = {
TECH_CASTLE_CONSTRUCTION = 3
 }
                add_number_to_name = no
                upgrades_from = ca_iqta_un                
        gold_cost = 250
        build_time = 360



tax_income = -2
retinuesize = 750




        ai_creation_factor = 101
extra_tech_building_start = 100        

    }
	
#Gardes mamelouks







ca_mamelouks_turcs_1 = {
desc = mamelouks_turcs_1_desc

potential = {
is_capital = yes
FROM = {
independent = yes
religion_group = muslim
is_nomadic = no
}
FROM = {
any_demesne_title = {
OR = {
region = world_middle_east
region = world_asia_minor 
region = world_europe_south_east
region = custom_egypte
region = world_steppe
region = world_persia
}
}
}

FROM = {
primary_title = {
OR = {
has_law = assab_2
has_law = assab_1
has_law = assab_0
}
		}
}

}
not_if_x_exists = { ca_mamelouks_slavons_1 ca_mamelouks_circas_1 ca_mamelouks_armenien_1 ca_mamelouks_soudanais_1 ca_mamelouks_francs_1 }
		
		trigger = { 
TECH_CASTLE_CONSTRUCTION = 0
 }
                add_number_to_name = no 
		gold_cost = 200
		build_time = 730

retinuesize = 4000
fort_level = 1.0
tax_income = -1

		ai_creation_factor = 101
extra_tech_building_start = 100		
		
	}


ca_mamelouks_turcs_2 = {
		desc = mamelouks_turcs_2_desc
potential = {
is_capital = yes
FROM = {
independent = yes
religion_group = muslim
is_nomadic = no
}
FROM = {
primary_title = {
OR = {
has_law = assab_2
has_law = assab_1
has_law = assab_0
}
		}
}
FROM = {
any_demesne_title = {
OR = {
region = world_middle_east
region = world_asia_minor 
region = world_europe_south_east
region = custom_egypte
region = world_steppe
region = world_persia
}
}
}
}



		trigger = { 
TECH_CASTLE_CONSTRUCTION = 2
FROM = {
primary_title = {
OR = {
has_law = assab_1
has_law = assab_0
}
		}
}


 }
              
  add_number_to_name = no                
		upgrades_from = ca_mamelouks_turcs_1
		prerequisites = { ca_ville_palatiale }
		gold_cost = 400
		build_time = 730

retinuesize = 6000
fort_level = 0.5
tax_income = -3
		ai_creation_factor = 101
extra_tech_building_start = 100			
		
	}


ca_mamelouks_turcs_3 = {
		desc = mamelouks_turcs_3_desc
potential = {
is_capital = yes
FROM = {
independent = yes
religion_group = muslim
is_nomadic = no
}
FROM = {
primary_title = {
OR = {
has_law = assab_2
has_law = assab_1
has_law = assab_0
}
		}
}
FROM = {
any_demesne_title = {
OR = {
region = world_middle_east
region = world_asia_minor 
region = world_europe_south_east
region = custom_egypte
region = world_steppe
region = world_persia
}
}
}
}

		trigger = { 
TECH_CASTLE_CONSTRUCTION = 4
FROM = {
primary_title = {
has_law = assab_0

		}
}


 }
                add_number_to_name = no            
		upgrades_from = ca_mamelouks_turcs_2
		prerequisites = { ca_ville_palatiale }
		gold_cost = 600
		build_time = 730

retinuesize = 8000
fort_level = 1.0
tax_income = -6
		ai_creation_factor = 101
		extra_tech_building_start = 100	
		
	}

ca_mamelouks_slavons_1 = {
desc = mamelouks_slavons_1_desc

potential = {
is_capital = yes
FROM = {
independent = yes
religion_group = muslim
is_nomadic = no
}

FROM = {
primary_title = {
OR = {
has_law = assab_2
has_law = assab_1
has_law = assab_0
}
		}
}
FROM = {
any_demesne_title = {
OR = {
region = custom_maghreb
region = world_asia_minor 
region = world_europe
region = world_steppe_west
}
}
}

}
		
		trigger = { 
TECH_CASTLE_CONSTRUCTION = 0
 }

not_if_x_exists = { ca_mamelouks_turcs_1 ca_mamelouks_circas_1 ca_mamelouks_armenien_1 ca_mamelouks_soudanais_1 ca_mamelouks_francs_1 }
		
                add_number_to_name = no 
		gold_cost = 200
		build_time = 730

retinuesize = 4000
fort_level = 1.0
tax_income = -1

		ai_creation_factor = 101
		extra_tech_building_start = 100	
		
	}


ca_mamelouks_slavons_2 = {
		desc = mamelouks_slavons_2_desc
potential = {
is_capital = yes
FROM = {
independent = yes
religion_group = muslim
is_nomadic = no
}
FROM = {
primary_title = {
OR = {
has_law = assab_2
has_law = assab_1
has_law = assab_0
}
		}
}
FROM = {
any_demesne_title = {
OR = {
region = custom_maghreb
region = world_asia_minor 
region = world_europe
region = world_steppe_west
}
}
}
}



		trigger = { 
TECH_CASTLE_CONSTRUCTION = 2
FROM = {
primary_title = {
OR = {
has_law = assab_1
has_law = assab_0
}
		}
}


 }
              
  add_number_to_name = no                
		upgrades_from = ca_mamelouks_slavons_1
		prerequisites = { ca_ville_palatiale }
		gold_cost = 400
		build_time = 730

retinuesize = 6000
fort_level = 0.5
tax_income = -3
		ai_creation_factor = 101
		extra_tech_building_start = 100	
		
	}


ca_mamelouks_slavons_3 = {
		desc = mamelouks_slavons_3_desc
potential = {
is_capital = yes
FROM = {
independent = yes
religion_group = muslim
is_nomadic = no
}
FROM = {
primary_title = {
OR = {
has_law = assab_2
has_law = assab_1
has_law = assab_0
}
		}
}
FROM = {
any_demesne_title = {
OR = {
region = custom_maghreb
region = world_asia_minor 
region = world_europe
region = world_steppe_west
}
}
}
}

		trigger = { 
TECH_CASTLE_CONSTRUCTION = 4
FROM = {
primary_title = {
has_law = assab_0

		}
}


 }
                add_number_to_name = no            
		upgrades_from = ca_mamelouks_slavons_2
		prerequisites = { ca_ville_palatiale }
		gold_cost = 600
		build_time = 730

retinuesize = 8000
fort_level = 1.0
tax_income = -6
		ai_creation_factor = 101
		extra_tech_building_start = 100	
		
	}

ca_mamelouks_circas_1 = {
desc = mamelouks_circas_1_desc

potential = {
is_capital = yes
FROM = {
independent = yes
religion_group = muslim
is_nomadic = no
}

FROM = {
primary_title = {
OR = {
has_law = assab_2
has_law = assab_1
has_law = assab_0
}
		}
}
FROM = {
any_demesne_title = {
OR = {
region = world_middle_east
region = world_asia_minor 
region = world_europe_south_east
region = custom_egypte
region = world_steppe_west
region = world_persia
}
}
}
}
		
		trigger = { 
TECH_CASTLE_CONSTRUCTION = 0
 }

not_if_x_exists = { ca_mamelouks_slavons_1 ca_mamelouks_turcs_1 ca_mamelouks_armenien_1 ca_mamelouks_soudanais_1 ca_mamelouks_francs_1 }
		
                add_number_to_name = no 
		gold_cost = 200
		build_time = 730

retinuesize = 4000
fort_level = 1.0
tax_income = -1

		ai_creation_factor = 101
		extra_tech_building_start = 100	
		
	}


ca_mamelouks_circas_2 = {
		desc = mamelouks_circas_2_desc
potential = {
is_capital = yes
FROM = {
independent = yes
religion_group = muslim
is_nomadic = no
}
FROM = {
primary_title = {
OR = {
has_law = assab_2
has_law = assab_1
has_law = assab_0
}
		}
}
FROM = {
any_demesne_title = {
OR = {
region = world_middle_east
region = world_asia_minor 
region = world_europe_south_east
region = custom_egypte
region = world_steppe_west
region = world_persia
}
}
}
}



		trigger = { 
TECH_CASTLE_CONSTRUCTION = 2
FROM = {
primary_title = {
OR = {
has_law = assab_1
has_law = assab_0
}
		}
}


 }
              
  add_number_to_name = no                
		upgrades_from = ca_mamelouks_circas_1
		prerequisites = { ca_ville_palatiale }
		gold_cost = 400
		build_time = 730

retinuesize = 6000
fort_level = 0.5
tax_income = -3
		ai_creation_factor = 101
		extra_tech_building_start = 100	
		
	}


ca_mamelouks_circas_3 = {
		desc = mamelouks_circas_3_desc
potential = {
is_capital = yes
FROM = {
independent = yes
religion_group = muslim
is_nomadic = no
}
FROM = {
primary_title = {
OR = {
has_law = assab_2
has_law = assab_1
has_law = assab_0
}
		}
}
FROM = {
any_demesne_title = {
OR = {
region = world_middle_east
region = world_asia_minor 
region = world_europe_south_east
region = custom_egypte
region = world_steppe_west
region = world_persia
}
}
}
}

		trigger = { 
TECH_CASTLE_CONSTRUCTION = 4
FROM = {
primary_title = {
has_law = assab_0

		}
}


 }
                add_number_to_name = no            
		upgrades_from = ca_mamelouks_circas_2
		prerequisites = { ca_ville_palatiale }
		gold_cost = 600
		build_time = 730

retinuesize = 8000
fort_level = 1.0
tax_income = -6
		ai_creation_factor = 101
		extra_tech_building_start = 100	
		
	}

ca_mamelouks_armenien_1 = {
desc = mamelouks_armenien_1_desc

potential = {
is_capital = yes
FROM = {
independent = yes
religion_group = muslim
is_nomadic = no
}

FROM = {
primary_title = {
OR = {
has_law = assab_2
has_law = assab_1
has_law = assab_0
}
		}
}
FROM = {
any_demesne_title = {
OR = {
region = world_middle_east
region = world_asia_minor 
region = world_europe_south_east
region = custom_egypte
region = world_persia
}
}
}
}
		
		trigger = { 
TECH_CASTLE_CONSTRUCTION = 0
 }

not_if_x_exists = { ca_mamelouks_slavons_1 ca_mamelouks_circas_1 ca_mamelouks_turcs_1 ca_mamelouks_soudanais_1 ca_mamelouks_francs_1 }
		
                add_number_to_name = no 
		gold_cost = 200
		build_time = 730

retinuesize = 4000
fort_level = 1.0
tax_income = -1

		ai_creation_factor = 101
		extra_tech_building_start = 100	
		
	}


ca_mamelouks_armenien_2 = {
		desc = mamelouks_armenien_2_desc
potential = {
is_capital = yes
FROM = {
independent = yes
religion_group = muslim
is_nomadic = no
}
FROM = {
primary_title = {
OR = {
has_law = assab_2
has_law = assab_1
has_law = assab_0
}
		}
}
FROM = {
any_demesne_title = {
OR = {
region = world_middle_east
region = world_asia_minor 
region = world_europe_south_east
region = custom_egypte
region = world_persia
}
}
}
}



		trigger = { 
TECH_CASTLE_CONSTRUCTION = 2
FROM = {
primary_title = {
OR = {
has_law = assab_1
has_law = assab_0
}
		}
}


 }
              
  add_number_to_name = no                
		upgrades_from = ca_mamelouks_armenien_1
        prerequisites = { ca_ville_palatiale }		
		gold_cost = 400
		build_time = 730

retinuesize = 6000
fort_level = 0.5
tax_income = -3
		ai_creation_factor = 101
		extra_tech_building_start = 100	
		
	}


ca_mamelouks_armenien_3 = {
		desc = mamelouks_armenien_3_desc
potential = {
is_capital = yes
FROM = {
independent = yes
religion_group = muslim
is_nomadic = no
}
FROM = {
primary_title = {
OR = {
has_law = assab_2
has_law = assab_1
has_law = assab_0
}
		}
}
FROM = {
any_demesne_title = {
OR = {
region = world_middle_east
region = world_asia_minor 
region = world_europe_south_east
region = custom_egypte
region = world_persia
}
}
}
}

		trigger = { 
TECH_CASTLE_CONSTRUCTION = 4
FROM = {
primary_title = {
has_law = assab_0

		}
}


 }
                add_number_to_name = no            
		upgrades_from = ca_mamelouks_armenien_2
		prerequisites = { ca_ville_palatiale }
		gold_cost = 600
		build_time = 730

retinuesize = 8000
fort_level = 1.0
tax_income = -6
		ai_creation_factor = 101
		extra_tech_building_start = 100	
		
	}

ca_mamelouks_soudanais_1 = {
desc = mamelouks_soudanais_1_desc

potential = {
is_capital = yes
FROM = {
independent = yes
religion_group = muslim
is_nomadic = no
}

FROM = {
primary_title = {
OR = {
has_law = assab_2
has_law = assab_1
has_law = assab_0
}
		}
}
FROM = {
any_demesne_title = {
OR = {
region = world_middle_east
region = world_africa
region = world_europe_west_iberia
}
}
}
}
		
		trigger = { 
TECH_CASTLE_CONSTRUCTION = 0
 }

not_if_x_exists = { ca_mamelouks_slavons_1 ca_mamelouks_circas_1 ca_mamelouks_armenien_1 ca_mamelouks_turcs_1 ca_mamelouks_francs_1 }
		
                add_number_to_name = no 
		gold_cost = 200
		build_time = 730

retinuesize = 4000
fort_level = 1.0
tax_income = -1

		ai_creation_factor = 101
		extra_tech_building_start = 100	
		
	}


ca_mamelouks_soudanais_2 = {
		desc = mamelouks_soudanais_2_desc
potential = {
is_capital = yes
FROM = {
independent = yes
religion_group = muslim
is_nomadic = no
}
FROM = {
primary_title = {
OR = {
has_law = assab_2
has_law = assab_1
has_law = assab_0
}
		}
}
FROM = {
any_demesne_title = {
OR = {
region = world_middle_east
region = world_africa
region = world_europe_west_iberia
}
}
}
}



		trigger = { 
TECH_CASTLE_CONSTRUCTION = 2
FROM = {
primary_title = {
OR = {
has_law = assab_1
has_law = assab_0
}
		}
}


 }
              
  add_number_to_name = no                
		upgrades_from = ca_mamelouks_soudanais_1
		prerequisites = { ca_ville_palatiale }
		gold_cost = 400
		build_time = 730

retinuesize = 6000
fort_level = 0.5
tax_income = -3
		ai_creation_factor = 101
		extra_tech_building_start = 100	
		
	}


ca_mamelouks_soudanais_3 = {
		desc = mamelouks_soudanais_3_desc
potential = {
is_capital = yes
FROM = {
independent = yes
religion_group = muslim
is_nomadic = no
}
FROM = {
primary_title = {
OR = {
has_law = assab_2
has_law = assab_1
has_law = assab_0
}
		}
}
FROM = {
any_demesne_title = {
OR = {
region = world_middle_east
region = world_africa
region = world_europe_west_iberia
}
}
}
}

		trigger = { 
TECH_CASTLE_CONSTRUCTION = 4
FROM = {
primary_title = {
has_law = assab_0

		}
}


 }
                add_number_to_name = no            
		upgrades_from = ca_mamelouks_soudanais_2
		prerequisites = { ca_ville_palatiale }
		gold_cost = 600
		build_time = 730

retinuesize = 8000
fort_level = 1.0
tax_income = -6
		ai_creation_factor = 101
		extra_tech_building_start = 100	
		
	}

ca_mamelouks_francs_1 = {
desc = mamelouks_francs_1_desc

potential = {
is_capital = yes
FROM = {
independent = yes
religion_group = muslim
is_nomadic = no
}

FROM = {
primary_title = {
OR = {
has_law = assab_2
has_law = assab_1
has_law = assab_0
}
		}
}
FROM = {
any_demesne_title = {
OR = {
region = world_europe
region = custom_maghreb
region = custom_egypte
region = custom_tripolitaine
}
}
}

}
		
		trigger = { 
TECH_CASTLE_CONSTRUCTION = 0
 }

not_if_x_exists = { ca_mamelouks_slavons_1 ca_mamelouks_circas_1 ca_mamelouks_armenien_1 ca_mamelouks_soudanais_1 ca_mamelouks_turcs_1 }
		
                add_number_to_name = no 
		gold_cost = 200
		build_time = 730

retinuesize = 4000
fort_level = 1.0
tax_income = -1

		ai_creation_factor = 101
		extra_tech_building_start = 100	
		
	}


ca_mamelouks_francs_2 = {
		desc = mamelouks_francs_2_desc
potential = {
is_capital = yes
FROM = {
independent = yes
religion_group = muslim
is_nomadic = no
}
FROM = {
primary_title = {
OR = {
has_law = assab_2
has_law = assab_1
has_law = assab_0
}
		}
}
FROM = {
any_demesne_title = {
OR = {
region = world_europe
region = custom_maghreb
region = custom_egypte
region = custom_tripolitaine
}
}
}
}



		trigger = { 
TECH_CASTLE_CONSTRUCTION = 2
FROM = {
primary_title = {
OR = {
has_law = assab_1
has_law = assab_0
}
		}
}


 }
              
  add_number_to_name = no                
		upgrades_from = ca_mamelouks_francs_1
		prerequisites = { ca_ville_palatiale }
		gold_cost = 400
		build_time = 730

retinuesize = 6000
fort_level = 0.5
tax_income = -3
		ai_creation_factor = 101
		extra_tech_building_start = 100	
		
	}


ca_mamelouks_francs_3 = {
		desc = mamelouks_francs_3_desc
potential = {
is_capital = yes
FROM = {
independent = yes
religion_group = muslim
is_nomadic = no
}
FROM = {
primary_title = {
OR = {
has_law = assab_2
has_law = assab_1
has_law = assab_0
}
		}
}
FROM = {
any_demesne_title = {
OR = {
region = world_europe
region = custom_maghreb
region = custom_egypte
region = custom_tripolitaine
}
}
}
}

		trigger = { 
TECH_CASTLE_CONSTRUCTION = 4
FROM = {
primary_title = {
has_law = assab_0

		}
}


 }
                add_number_to_name = no            
		upgrades_from = ca_mamelouks_francs_2
		prerequisites = { ca_ville_palatiale }
		gold_cost = 600
		build_time = 730

retinuesize = 8000
fort_level = 1.0
tax_income = -6
		ai_creation_factor = 101
		extra_tech_building_start = 100	
		
	}

ca_petitmamk_0 = {
		desc = petitmamk_0_desc
		potential = {


FROM = {
independent = no
religion_group = muslim
is_nomadic = no
tier = DUKE
top_liege = {
primary_title = {
has_law = assab_0
}
		}

}


}
		trigger = { 
TECH_CASTLE_CONSTRUCTION = 2

 }
                add_number_to_name = no            
		
		gold_cost = 200
		build_time = 730

retinuesize = 2000
tax_income = -3
		ai_creation_factor = 101
		
		
	}

ca_changassab_0 = {
		desc = changassab_0_desc
		potential = {
is_capital = yes

FROM = {
independent = yes
religion_group = muslim
is_nomadic = no
has_character_flag = changer_asab


}
		trigger = { 
TECH_CASTLE_CONSTRUCTION = 0

 }
                add_number_to_name = no            
		
		gold_cost = 10
		build_time = 600

retinuesize = 1500
tax_income = -4
		ai_creation_factor = 101
		
		
	}

}